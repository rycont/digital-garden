---
title: 반쪽짜리 런칭에 대한 소회
layout: ../layouts/article.astro
date: 2023-06-22T17:35:31.870Z
---

# 반쪽짜리 런칭에 대한 소회

페이 프로젝트중에 가장 기억에 남는 사건은 역시 [](토스)QR결제를 사용한 런칭..이였던것같아요,,,, 인증결제로 만들어둔 프로덕트를 익명결제로 돌리려니 정말 난감했어요. 우리가 생각한 방법은 “익명을 대표할 사용자와 결제수단를 하나 만들고, 모든 결제를 그 사용자에게 묶어두기!!”였습니다. 이렇게 프로덕트를 최대한 유지하려고 하던 와중에도 알 수 없는 오류는 계속 터지고, 서버는 죽고, 디비는 꼬이고, 아주 난리였어요.. 또 위에서는 빨리 하라고 압박주고 정말 힘들었습니다. 그래도 어찌어찌 잘 구현은 했네요, 그렇게 몇 달 잘 굴러간게 신기합니다. 사실 잘 굴러가진 않았던 것 같아요. 오류도 많고 자꾸 죽고 에휴 그냥 디미페이 절망편이였어요

프로덕트에는 상주 매니저님이 송금 사실을 확인하고 인증 바코드를 찍어주는 식으로 구현이 됐습니다. 사실 그 전에 우리의 실험적인 도전이 하나 있었어요. 송금확인을 백엔드에서 자동으로 하는거에요. SMS 가로채기, 은행 크롤링 등 여러 방법을 고민해봤고, 그중 모바일뱅킹 입금알림을 후킹해보기로 했어요. 안드로이드 폰에 스타알림 앱을 깔고, 수많은 알림 후킹 앱을 통해 서버로 알림을 전송하고, 내용을 파싱해서 입금 사실을 확인하기로 한거죠. 이거 테스트 할 때는 꽤 멋졌어요! 송금 QR을 읽고 / 돈을 보내고 / 결제 완료! 라는 이상적인 플로우를 만들었었어요.

근데 잘 안됐어요.. 알림 후킹이 불안정해서 자꾸 죽어버리더라고요. 그래서 그냥 수동확인으로 바꿨어요. [](Cloudflare) [](Workers)와 KV로 후킹서버를 만들고, 실제로 테스트하긴 힘드니까 가상 결제도 만들고, 잔액관리도 하고.. [](프론트엔드)에 SSE도 만들어보고!! 구현하는건 나름 꽤 재밌었어요

[원래는 이렇게 엘레강스하게 구현하고 싶었는데요!](https://www.youtube.com/shorts/9cmtrsTB9UM?feature=share)
